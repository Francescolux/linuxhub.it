---
title: 'Un aggiornamento sulla risoluzione di Meltdown & Spectre'
date: 2018-01-15
layout: post
author: Mirko B.
author_github: mirkobrombin
coauthor: linuxhub
coauthor_github: linuxhubit
tags:

---
La settimana scorsa sono state annunciate una serie di vulnerabilità critiche denominate <strong>Spectre</strong> e <strong>Meltdown</strong>, di cui abbiamo giá parlato nei <a href="https://linuxhub.it/?s=meltdown">precedenti articoli</a>. A causa della natura di questi problemi, le soluzioni sono complesse e richiedono la risoluzione di codice delicato. La correzione Meltdown per <strong>x86</strong> è <strong>KPTI</strong>. KPTI è stato fuso nell'albero Linux mainline e in molti alberi stabili, compresi quelli utilizzati da Fedora. Le correzioni per altre architetture sono quasi terminate e dovrebbero essere presto disponibili. Correggere Specter è più difficile e richiede correzioni su più aree.<img class="aligncenter size-full wp-image-3558 size-full wp-image-286" src="https://linuxhub.it/wordpress/wp-content/uploads/2018/01/meltdown-spectre-yellow-wallpaper-linuxhub.jpg" alt="" width="710" height="473" />Similmente a Meltdown, Spectre sfrutta la speculazione fatta dalle CPU. Una soluzione sviluppata da <strong>Google</strong> e altri è quella di introdurre "<strong>retpoline</strong>". Una sequenza di codice che potrebbe rendere disponibile questa falla viene sostituita con una "<strong>retpoline</strong>". La parte difficile di questa soluzione è che il compilatore deve essere consapevole di dove posizionare una retpoline. Ciò significa che una soluzione completa coinvolge anche il compilatore.La prima parte del lavoro necessario per retpoline è ora completata, questo dovrebbe essere completamente integrato nei prossimi giorni e disponibile nelle versioni stabili di Fedora. Queste patch forniscono un grado di protezione contro gli attacchi Spectre ma <strong>è necessario più lavoro</strong> per ottenere una soluzione completa. Il supporto del compilatore per fornire ulteriore protezione è ancora sotto esame da parte degli sviluppatori <strong>upstream</strong>.Un'alternativa alle patch di retpoline comporta l'esposizione di alcune caratteristiche hardware per controllare più strettamente la speculazione. Alcune CPU hanno una funzione chiamata<strong> Indirect Branch Restricted Speculation (IBRS)</strong>. Quando questa funzione è abilitata, i programmi in <strong>userspace</strong> sono ulteriormente limitati nel modo in cui sono in grado di eseguire istruzioni in modo speculativo. Il supporto completo di questa funzione richiede <strong>aggiornamenti</strong> <strong>del</strong> <strong>microcodice</strong>, alcuni dei quali sono giá disponibili. IBRS offre una soluzione più completa senza la necessità di supporto per il compilatore, ma a un costo più elevato delle prestazioni. Le patch IBRS sono ancora in fase di revisione, ma non saranno disponibili in tempo per <strong>Linux 4.15</strong>. Ad ogni modo quando saranno disponibili le patch IBRS, verranno fornite come aggiornamento di Fedora.Sia l'IBRS che la retpoline coprono la "<strong>variante 2</strong>" di <strong>Spectre</strong>. La "<strong>variante 1</strong>" non ha al momento una soluzione facilmente applicabile. La soluzione per la variante 1 comporta la scansione del codice per sequenze, per rilevare quali possono essere le problematiche. Il metodo per la scansione del codice tende a produrre molti falsi positivi (sequenze che non sono effettivamente vulnerabili), così gli sviluppatori a monte stanno cercando di restringere quali parti del codice debbano effettivamente venir sottoposte a riparazione.Sebbene Spectre sia un importante problema di sicurezza, altrettanto importante è un'attenta revisione delle correzioni per assicurarsi che la soluzione sia gestibile. Correre una correzione potrebbe causare più problemi in futuro. Il team di Fedora controlla continuamente le correzioni di Spectre e le fornisce come di consueto aggiornamento.<strong>Meltdown e Spectre</strong> | <a href="https://meltdownattack.com/">https://meltdownattack.com/</a><strong>KPTI</strong> | <a href="https://linuxhub.it/2018/01/07/kpti-la-nuova-funzionalita-del-kernel-mitiga-meltdown/">https://linuxhub.it/2018/01/07/kpti-la-nuova-funzionalita-del-kernel-mitiga-meltdown/</a>