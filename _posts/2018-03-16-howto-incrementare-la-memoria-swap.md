---
title: '#howto - Incrementare la memoria Swap'
date: 2018-03-16
layout: post
author: Mirko B.
author_github: mirkobrombin
coauthor: linuxhub
coauthor_github: linuxhubit
tags:

---
<p>Quando si esaurisce la memoria fisica, entra in gioco quella virtuale, che memorizza i dati di memoria sul disco (area swap). La lettura dal disco é di gran numero più lenta di quella standard, per questo se noti l'utilizzo costante della memoria swap,&nbsp;prendi in considerazione di ampliare la memoria RAM del tuo PC se possibile.</p><h2>Aggiungere memoria swap (file)</h2><p>La creazione di uno spazio di memoria virtuale é semplicissimo e alla portata di tutti, é comunque importante far notare che é richiesta particolare attenzione dei passaggi, per evitare la perdita di dati. In questo esempio andremo a creare una memoria da 2GB. Per prima cosa dobbiamo creare un nuovo file .img da 2GB, digitando da riga di comando:</p><pre>dd if=/dev/zero of=/media/fasthdd/swap.img bs=1024 count=2M</pre><p>successivamente cambiamo il file system:</p><pre>mkswap /media/fasthdd/swap.img</pre><p>La nostra memoria é pronta e possiamo subito abilitarla digitando:</p><pre>swapon /media/fasthdd/swap.img</pre><h2>Nuova (partizione) swap</h2><p>Nel caso fosse disponibile spazio inutilizzato, é possibile creare una partizione intera come memoria swap. Per prima cosa identifichiamo il disco da cui vogliamo creare una nuova partizione:</p><pre>fdisk -l</pre><p>nel nostro caso il disco sará /dev/sda, digitiamo quindi</p><pre>fdisk /dev/sda</pre><p>in questo modo entriamo nel menú di gestione disco, digitiamo (n) e creiamo una nuova partizione della dimensione desiderata (leggi a fondo articolo la tabella <strong>Red Hat Raccomandazioni swap</strong> per la dimensione corretta). Una volta creata la nuova partizione possiamo verificare digitando nuovamente:</p><pre>fdisk -l</pre><p>Ora possiamo scrivere il file system swap nella nuova partizione che, nel nostro caso é /dev/sda4:</p><pre>mkswap /dev/sda4</pre><p>abilitiamo ora la nuova swap:</p><pre>swapon /dev/sda4</pre><h2>Abilitare la memoria swap all'avvio</h2><p>Per rendere disponibile la nuova memoria swap ad ogni riavvio del sistema, procediamo in questo ordine, apriamo con l'editor preferito e privilegi d'amministrazione, il file /etc/fstab:</p><pre>sudo nano /etc/fstab</pre><p>e inseriamo alla fine del documento la seguente stringa e salviamo:</p><pre>/media/fasthdd/swap.img swap swap sw 0 0</pre><p>In questo modo la nuova memoria swap sará disponibile ad ogni riavvio.</p><h2>Red Hat Raccomandazioni swap</h2><p>Red Hat ha distribuito una regola base per la creazione di una memoria swap, di seguito la tabella:</p><table>	<tbody>		<tr>			<th>RAM</th>			<th>swap</th>		</tr>		<tr>			<td>4GB o meno</td>			<td>minimo 2GB</td>		</tr>		<tr>			<td>da 4GB a 16GB</td>			<td>minimo 4GB</td>		</tr>		<tr>			<td>da 16GB a 64GB</td>			<td>minimo 8GB</td>		</tr>		<tr>			<td>da 64GB a 256GB</td>			<td>minimo 16GB</td>		</tr>	</tbody></table><p>Ovviamente le ultime due misure sono riservate a contesti piú avanzati.</p>