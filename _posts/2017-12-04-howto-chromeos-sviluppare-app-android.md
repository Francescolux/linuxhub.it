---
title: '#howto #ChromeOS - Sviluppare app Android'
date: 2017-12-04
layout: post
author: Mirko B.
author_github: mirkobrombin
coauthor: linuxhub
coauthor_github: linuxhubit
tags:
  - python  
  - github  
  - bash  
  - ssh 
---
<p>L'esecuzione di <strong>applicazioni native Linux su</strong> <strong>Chromebook</strong> non è più una novità. Per chi ancora non è al corrente, tutto ció é stato reso possibile da&nbsp;<strong>crouton</strong>, uno script per <strong>Chromium OS</strong> che permette l'esecuzione delle&nbsp;applicazioni native Linux (normalmente sviluppate per girare su <strong>Xorg</strong>), sul sistema operativo di Google, ChromeOS.</p><blockquote><p>Aggiornamento: 21 Maggio 2018<br />Google sta rilasciando su larga scala un aggiornamento contenente Crostini, un progetto in grado di eseguire nativamente software Linux (precisamente Debian) su Chrome OS. Con l'arrivo dell'aggiornamento é consigliato utilizzare Crostini e non Crouton.</p></blockquote><p>Con l'arrivo nativo delle App Android su Chrome OS, il parco software del sistema operativo di Google&nbsp;ha raggiunto livelli invidiabili da Windows stesso. È con questo proposito che nasce il bisogno di sviluppare app direttamente da Chromebook. Grazie al precedentemente nominato crouton, possiamo appunto non solo utilizzare Android Studio su ChromeOS ma bensì testare le applicazioni direttamente sul nostro Chromebook, eliminando la necessità dell'emulatore Android.</p><h3>Procedura</h3><h4>Attivare la modalità sviluppatore: cancellerà tutti i dati!</h4><p>Visitando <a href="https://www.chromium.org/chromium-os/developer-information-for-chrome-os-devices">questa</a> pagina, cliccare poi sul vostro modello e seguire le istruzioni (prima assicuratevi di aver fatto un backup dei vostri dati, poichè verranno cancellati).</p><h4>Creare una Linux chroot con <a href="https://github.com/dnschneid/crouton">crouton</a></h4><p>Seguendo la <a href="https://github.com/dnschneid/crouton/#examples">easy way</a>. con alcune piccole modifiche, si puo' procedere in questo modo:</p><ul>	<li>Scaricate crouton sul vostro Chromebook (nella vostra cartella <em>Downloads</em>)</li>	<li>Aprite il terminale con <strong>Ctrl+Alt+T</strong></li>	<li>Entrate nella shell digitando <em>shell</em></li>	<li>Lanciate	<pre><code>sudo sh ~/Downloads/crouton -t xfce,extension,xorg,xiwi</code></pre>	<p>&nbsp;</p>	</li></ul><p>Ci vorra un po', affinché lo script termini di scaricare&nbsp;i pacchetti dalla rete, la reale velocità di download dipende come sempre dal vostro provider.</p><p>Nel frattempo, lasciatemi chiarire cosa fa questo comando e quali differenze sostanziali ci sono con la easy way. Di default e' fornito Ubuntu 16-04 LTS, che si addice in modo assolutamente ideale alla scopo che stiamo trattando. <em>.xfce&nbsp;</em>e' il desktop environment che verra' usato. La&nbsp;.extension portera' la sincronizzazione degli appunti e altre integrazioni tra chroot e Chrome OS.</p><p>Per sfruttarla al meglio, dal Chrome Web Store si puo' installare <a href="https://chrome.google.com/webstore/detail/crouton-integration/gcpneefbbnfalgjniomfjknbcgkbijom">questa estensione</a>. <em>.xorg,xiwi</em> significa che lo script installera' due differenti modi di accdere al chroot: tramite il server xorg, usando una combinazione di tasti che permettera' di switchare tra il chroot desktop e Chrome, o direttamente tramite Chrome OS (finestra o tab). Useremo il primo per il setup di Android Studio, e dopo l'altro per lanciarlo come una finestra indipendente. Vi verra' chiesto di creare un nome utente ed una password Linux. Non scordatelo!</p><h4>Download Android Studio per Linux</h4><p>Una volta che lo script abbia una finito (vedrete il messaggio <em>Done!</em>), aprite una nuova tab e scaricate <a href="https://developer.android.com/studio/index.html">Android Studio.</a> Lasciate il file come<strong> .zip</strong> nella vostra cartella <em>Downloads</em>.</p><h4>Configurare Android studio nel vostro chroot</h4><p>Tornate al terminale, o aprite un altro e digitate shell. Lanciate il comando sudo startxfce digitando la vostra password. Potete switchare tra XFCE e Chrome OS in qualsiasi momento usando le combinazioni di tasti</p><pre><code>Ctrl+Alt+Shift+Back e Ctrl+Alt+Shift+Forward</code></pre><p>Per spegnere la chroot, semplicmente basta effettuare il logout&nbsp;da XFCE.</p><p>Una volta scelta la configurazione di default aprite il file Manager e recatevi nella cartella ~/Download, una volta selezionato il file zip di Android Studio, estraetelo. Potete estrarlo nella cartella ~/Downloads o muoverlo nella cartella ~/Software. L'importante e' che vi ricordiate dove sia. Nel mio caso, terro' come buono lo spostamento della cartella ~/Software. Recatevi ora in ~/Software/android-studio/bin ed aprite un terminale qui. Digitate <code>sh studio.sh</code> ed attraverso la configuratzione di Android Studio (potete scegliere di installare l# SDK anche in un supporto esterno se avete problemi di capienza). Non serve installare nessun device virtuale.</p><p>Download ed installazione richiedono un po di tempo. Creiamo un nuovo progetto, in modo da raggiungere la schermata principale di Android Studio, quindi dal menu:&nbsp;<em>Tools &gt; Create Command-line Launcher</em> e creiamo il launcher per l'esecuzione del software. Torniamo al Terminale chroot e assicuriamoci che sia installato Python</p><pre><code>sudo apt install python</code></pre><h4>Eseguire Android Studio in finestra Chrome</h4><p>Torniamo al terminale di Chrome e digitiamo</p><pre><code>sudo enter-chroot xiwi studio</code></pre><p>Android Studio dovrebbe avviarsi in una nuova finestra di ChromeOS, seguito da un log corposo nel terminale stesso. <img class=" size-full wp-image-231" alt="" height="449" src="https://linuxhub.it/wordpress/wp-content/uploads/2017/12/1_-itTjrI0wjj8TwPeqr64fA.png" width="800" /></p><h4>Utilizzare il Chromebook come ADB device</h4><p>Sempre dal nostro Terminale di Chrome, digitiamo in sequenza:</p><pre><code>sudo crossystem dev_boot_signed_only=0sudo /usr/libexec/debugd/helpers/dev_features_rootfs_verificationsudo reboot</code></pre><p>Questo configurerà il firewall sulle nostre esigenze. In questo momento è importante e indispensabile riavviare il Chromebook. Una volta riavviato, apriamo un nuovo Terminale di Chrome e digitiamo:</p><pre><code>sudo /usr/libexec/debugd/helpers/dev_features_ssh</code></pre><p>Ora non ci resta che abilitare il Debugging ADB dalle impostazioni Android del Chromebook, per farlo ci basta seguire la procedura standard:</p><ul>	<li>Dalle impostazioni di Android raggiungiamo le informazioni sul dispositivo</li>	<li>Clicchiamo sette volte&nbsp;<strong>Build Number&nbsp;</strong></li>	<li>Un avviso ci informa dell'avvenuta abilitazione della modalità sviluppatore</li>	<li>Sempre dalle impostazioni di Android, rechiamoci nel nuovo menu comparso "Opzioni Sviluppatore", cerchiamo ADB Debugging e abilitiamolo</li></ul><p>Non ci resta che connetterci via ADB tramite Terminale Chrome:</p><pre><code>adb connect localhost:22</code></pre><p>comparirà una finestra di dialogo dove accettiamo l'accesso.</p><h4>Testare le nostre App</h4><p>Avviamo Android Studio, per farlo apriamo il nostro Terminale Chrome e digitiamo</p><pre><code>sudo enter-chroot xiwi studio</code></pre><p>apriamo il nostro progetto o creiamone uno nuovo. Aprendo la lista dei dispositivi connessi e disponibili per il debug della nostra nuova App, dovrebbe comparire il Chromebook stesso in cui è aperto Android Studio, se così non fosse priamo a digitare dal Terminale Chrome:</p><pre><code>adb kill-serveradb connect localhost:22</code></pre><p>una volta selezionato il nostro Chromebook, eseguiamo il debug dell'App, che dovrebbe aprirsi subito nel nostro schermo. <img class=" size-full wp-image-232" alt="" height="449" src="https://linuxhub.it/wordpress/wp-content/uploads/2017/12/1_rFoLohHja187iIE2oJ3OFA.png" width="800" /></p><h4>Avviare rapidamente Android Studio</h4><p>Sicuramente quello utilizzato sino a questo punto della guida, non è uno dei comandi più semplici da ricordare:</p><pre><code>sudo enter-chroot xiwi studio</code></pre><p>Un buon trucco è quello di creare un Alias, per farlo digitiamo nel Terminale Chrome:</p><pre><code>echo 'alias studio="sudo enter-chroot xiwi studio'" &gt;&gt; ~/.bashrc</code></pre><p>a questo punto ci basterà aprire il Terminale Chrome e digitare <code>studio</code> per avviare Android Studio.</p><p><strong>crouton</strong> |&nbsp;<a href="https://github.com/dnschneid/crouton/">https://github.com/dnschneid/crouton/</a></p><p><strong>courton (estensione)</strong> |&nbsp;<a href="https://chrome.google.com/webstore/detail/crouton-integration/gcpneefbbnfalgjniomfjknbcgkbijom">https://chrome.google.com/webstore/detail/crouton-integration/gcpneefbbnfalgjniomfjknbcgkbijom</a></p><p><strong>Chrome OS Devices Dev. Info.</strong> |&nbsp;<a href="https://www.chromium.org/chromium-os/developer-information-for-chrome-os-devices">https://www.chromium.org/chromium-os/developer-information-for-chrome-os-devices</a></p><p><strong>Android Studio</strong> |&nbsp;<a href="https://developer.android.com/studio/index.html">https://developer.android.com/studio/index.html</a></p>